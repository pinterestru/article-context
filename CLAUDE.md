# Important Memory

Below are referencies to md files with some information you may need for development. 
## Product Requirements Document (PRD) reference

- [Product Requirements Document (PRD)](#table-of-contents)
  - [Goals and Background Context](./docs/prd/goals-and-background-context.md)
    - [Goals](./docs/prd/goals-and-background-context.md#goals)
    - [Background Context](./docs/prd/goals-and-background-context.md#background-context)
    - [Change Log](./docs/prd/goals-and-background-context.md#change-log)
  - [Requirements](./docs/prd/requirements.md)
    - [Functional](./docs/prd/requirements.md#functional)
    - [Non Functional](./docs/prd/requirements.md#non-functional)
  - [User Interface Design Goals](./docs/prd/user-interface-design-goals.md)
    - [Overall UX Vision](./docs/prd/user-interface-design-goals.md#overall-ux-vision)
    - [Key Interaction Paradigms](./docs/prd/user-interface-design-goals.md#key-interaction-paradigms)
    - [Core Screens and Views](./docs/prd/user-interface-design-goals.md#core-screens-and-views)
    - [Accessibility: WCAG AA](./docs/prd/user-interface-design-goals.md#accessibility-wcag-aa)
    - [Branding](./docs/prd/user-interface-design-goals.md#branding)
    - [Target Device and Platforms: Web Responsive](./docs/prd/user-interface-design-goals.md#target-device-and-platforms-web-responsive)
  - [Technical Assumptions](./docs/prd/technical-assumptions.md)
    - [Repository Structure: Monorepo](./docs/prd/technical-assumptions.md#repository-structure-monorepo)
    - [Service Architecture](./docs/prd/technical-assumptions.md#service-architecture)
    - [Testing Requirements](./docs/prd/technical-assumptions.md#testing-requirements)
    - [Additional Technical Assumptions and Requests](./docs/prd/technical-assumptions.md#additional-technical-assumptions-and-requests)
  - [Epic List](./docs/prd/epic-list.md)
  - [Epic 1: Foundation & Core Article System](./docs/prd/epic-1-foundation-core-article-system.md)
    - [Story 1.1: Project Setup and Configuration](./docs/prd/epic-1-foundation-core-article-system.md#story-11-project-setup-and-configuration)
      - [Acceptance Criteria](./docs/prd/epic-1-foundation-core-article-system.md#acceptance-criteria)
    - [Story 1.2: Core Layout and Routing Implementation](./docs/prd/epic-1-foundation-core-article-system.md#story-12-core-layout-and-routing-implementation)
      - [Acceptance Criteria](./docs/prd/epic-1-foundation-core-article-system.md#acceptance-criteria)
    - [Story 1.3: Article API Integration](./docs/prd/epic-1-foundation-core-article-system.md#story-13-article-api-integration)
      - [Acceptance Criteria](./docs/prd/epic-1-foundation-core-article-system.md#acceptance-criteria)
    - [Story 1.4: Basic Article Rendering](./docs/prd/epic-1-foundation-core-article-system.md#story-14-basic-article-rendering)
      - [Acceptance Criteria](./docs/prd/epic-1-foundation-core-article-system.md#acceptance-criteria)
  - [Epic 2: Cloaking Implementation & Verification](./docs/prd/epic-2-cloaking-implementation-verification.md)
    - [Story 2.1: TDS API Integration for Server-Side Decisions](./docs/prd/epic-2-cloaking-implementation-verification.md#story-21-tds-api-integration-for-server-side-decisions)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
    - [Story 2.2: CSS-Based Content Control Implementation](./docs/prd/epic-2-cloaking-implementation-verification.md#story-22-css-based-content-control-implementation)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
    - [Story 2.3: Client-Side Fingerprinting System](./docs/prd/epic-2-cloaking-implementation-verification.md#story-23-client-side-fingerprinting-system)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
    - [Story 2.4: Client Verification API Route](./docs/prd/epic-2-cloaking-implementation-verification.md#story-24-client-verification-api-route)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
    - [Story 2.5: Client-Side Verification Flow](./docs/prd/epic-2-cloaking-implementation-verification.md#story-25-client-side-verification-flow)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
    - [Story 2.6: Investigation Behavior Detection](./docs/prd/epic-2-cloaking-implementation-verification.md#story-26-investigation-behavior-detection)
      - [Acceptance Criteria](./docs/prd/epic-2-cloaking-implementation-verification.md#acceptance-criteria)
  - [Epic 3: Interactive Promocode Widgets](./docs/prd/epic-3-interactive-promocode-widgets.md)
    - [Story 3.1: Data-Action Widget Framework](./docs/prd/epic-3-interactive-promocode-widgets.md#story-31-data-action-widget-framework)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
    - [Story 3.2: Promocode Display Widget](./docs/prd/epic-3-interactive-promocode-widgets.md#story-32-promocode-display-widget)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
    - [Story 3.3: One-Click Copy Functionality](./docs/prd/epic-3-interactive-promocode-widgets.md#story-33-one-click-copy-functionality)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
    - [Story 3.4: Promocode API Integration](./docs/prd/epic-3-interactive-promocode-widgets.md#story-34-promocode-api-integration)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
    - [Story 3.5: Click Tracking and Redirection](./docs/prd/epic-3-interactive-promocode-widgets.md#story-35-click-tracking-and-redirection)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
    - [Story 3.6: Animated Promocode Modal](./docs/prd/epic-3-interactive-promocode-widgets.md#story-36-animated-promocode-modal)
      - [Acceptance Criteria](./docs/prd/epic-3-interactive-promocode-widgets.md#acceptance-criteria)
  - [Epic 4: Analytics & Monitoring Integration](./docs/prd/epic-4-analytics-monitoring-integration.md)
    - [Story 4.1: Google Tag Manager Implementation](./docs/prd/epic-4-analytics-monitoring-integration.md#story-41-google-tag-manager-implementation)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)
    - [Story 4.2: Google Analytics 4 Configuration](./docs/prd/epic-4-analytics-monitoring-integration.md#story-42-google-analytics-4-configuration)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)
    - [Story 4.3: Yandex Metrica Integration](./docs/prd/epic-4-analytics-monitoring-integration.md#story-43-yandex-metrica-integration)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)
    - [Story 4.4: PostHog Product Analytics](./docs/prd/epic-4-analytics-monitoring-integration.md#story-44-posthog-product-analytics)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)
    - [Story 4.5: Sentry Error Monitoring](./docs/prd/epic-4-analytics-monitoring-integration.md#story-45-sentry-error-monitoring)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)
    - [Story 4.6: Custom Event Architecture](./docs/prd/epic-4-analytics-monitoring-integration.md#story-46-custom-event-architecture)
      - [Acceptance Criteria](./docs/prd/epic-4-analytics-monitoring-integration.md#acceptance-criteria)


## Affiliate Article UI Frontend Architecture reference

- [Affiliate Article UI Frontend Architecture Document](#table-of-contents)
  - [Change Log](./docs/architecture/change-log.md)
  - [Template and Framework Selection](./docs/architecture/template-and-framework-selection.md)
  - [Frontend Tech Stack](./docs/architecture/tech-stack.md)
    - [Technology Stack Table](./docs/architecture/tech-stack.md#technology-stack-table)
  - [Project Structure](./docs/architecture/source-tree.md)
  - [Component Standards](./docs/architecture/component-standards.md)
    - [Component Template](./docs/architecture/component-standards.md#component-template)
  - [React 19 Features](./docs/architecture/react-19-features.md)
    - [Overview](./docs/architecture/react-19-features.md#overview)
    - [Key Features We Use](./docs/architecture/react-19-features.md#key-features-we-use)
    - [useActionState for Forms](./docs/architecture/react-19-features.md#useactionstate-for-forms)
    - [useOptimistic for Promocode Interactions](./docs/architecture/react-19-features.md#useoptimistic-for-promocode-interactions)
    - [useFormStatus for Nested Loading States](./docs/architecture/react-19-features.md#useformstatus-for-nested-loading-states)
    - [use Hook for Async Data](./docs/architecture/react-19-features.md#use-hook-for-async-data)
    - [Advanced Pattern: Optimistic Cart Updates](./docs/architecture/react-19-features.md#advanced-pattern-optimistic-cart-updates)
    - [Best Practices](./docs/architecture/react-19-features.md#best-practices)
    - [Migration Guide](./docs/architecture/react-19-features.md#migration-guide)
  - [Type Safety & Validation](./docs/architecture/type-safety-validation.md)
    - [Overview](./docs/architecture/type-safety-validation.md#overview)
    - [Core Principles](./docs/architecture/type-safety-validation.md#core-principles)
    - [Comprehensive API Response Validation](./docs/architecture/type-safety-validation.md#comprehensive-api-response-validation)
    - [Enhanced HTTP Client with Validation](./docs/architecture/type-safety-validation.md#enhanced-http-client-with-validation)
    - [Form Validation Patterns](./docs/architecture/type-safety-validation.md#form-validation-patterns)
    - [URL Parameter Validation](./docs/architecture/type-safety-validation.md#url-parameter-validation)
    - [Service Layer with Validation](./docs/architecture/type-safety-validation.md#service-layer-with-validation)
    - [Error Boundary with Validation Errors](./docs/architecture/type-safety-validation.md#error-boundary-with-validation-errors)
    - [Testing Validation](./docs/architecture/type-safety-validation.md#testing-validation)
    - [Best Practices](./docs/architecture/type-safety-validation.md#best-practices)
    - [Naming Conventions](./docs/architecture/type-safety-validation.md#naming-conventions)
  - [State Management](./docs/architecture/state-management.md)
    - [Store Structure](./docs/architecture/state-management.md#store-structure)
    - [State Management Template](./docs/architecture/state-management.md#state-management-template)
  - [API Integration](./docs/architecture/api-integration.md)
    - [Server-Only Service Layer Pattern](./docs/architecture/api-integration.md#server-only-service-layer-pattern)
    - [Service Structure](./docs/architecture/api-integration.md#service-structure)
    - [Base HTTP Client](./docs/architecture/api-integration.md#base-http-client)
    - [Service Implementation Pattern](./docs/architecture/api-integration.md#service-implementation-pattern)
    - [Usage in Server Components](./docs/architecture/api-integration.md#usage-in-server-components)
    - [Usage in Server Actions](./docs/architecture/api-integration.md#usage-in-server-actions)
    - [Benefits of This Pattern](./docs/architecture/api-integration.md#benefits-of-this-pattern)
  - [Caching Strategy](./docs/architecture/caching-strategy.md)
    - [Overview](./docs/architecture/caching-strategy.md#overview)
    - [Layer 1: React Cache (Request Deduplication)](./docs/architecture/caching-strategy.md#layer-1-react-cache-request-deduplication)
    - [Layer 2: Next.js Data Cache (Persistent Caching)](./docs/architecture/caching-strategy.md#layer-2-nextjs-data-cache-persistent-caching)
    - [Caching Rules for Different Content Types](./docs/architecture/caching-strategy.md#caching-rules-for-different-content-types)
    - [Cache Invalidation Patterns](./docs/architecture/caching-strategy.md#cache-invalidation-patterns)
    - [Client-Side Caching with React Query](./docs/architecture/caching-strategy.md#client-side-caching-with-react-query)
    - [Performance Monitoring](./docs/architecture/caching-strategy.md#performance-monitoring)
    - [Best Practices](./docs/architecture/caching-strategy.md#best-practices)
    - [Cache Decision Matrix](./docs/architecture/caching-strategy.md#cache-decision-matrix)
  - [Routing](./docs/architecture/routing.md)
    - [Route Configuration](./docs/architecture/routing.md#route-configuration)
  - [Styling Guidelines](./docs/architecture/styling-guidelines.md)
    - [Styling Approach](./docs/architecture/styling-guidelines.md#styling-approach)
    - [Global Theme Variables](./docs/architecture/styling-guidelines.md#global-theme-variables)
  - [Testing Strategy](./docs/architecture/testing-strategy.md)
    - [Overview](./docs/architecture/testing-strategy.md#overview)
    - [Test Structure](./docs/architecture/testing-strategy.md#test-structure)
    - [MSW Setup for API Mocking](./docs/architecture/testing-strategy.md#msw-setup-for-api-mocking)
    - [Test Utilities](./docs/architecture/testing-strategy.md#test-utilities)
    - [Global Test Setup](./docs/architecture/testing-strategy.md#global-test-setup)
    - [Component Testing Examples](./docs/architecture/testing-strategy.md#component-testing-examples)
    - [E2E Testing with Playwright](./docs/architecture/testing-strategy.md#e2e-testing-with-playwright)
    - [Testing Configuration](./docs/architecture/testing-strategy.md#testing-configuration)
    - [Testing Best Practices](./docs/architecture/testing-strategy.md#testing-best-practices)
  - [Observability Strategy](./docs/architecture/observability-strategy.md)
    - [Overview](./docs/architecture/observability-strategy.md#overview)
    - [Core Components](./docs/architecture/observability-strategy.md#core-components)
    - [Trace ID Architecture](./docs/architecture/observability-strategy.md#trace-id-architecture)
    - [Middleware Integration](./docs/architecture/observability-strategy.md#middleware-integration)
    - [Structured Logging](./docs/architecture/observability-strategy.md#structured-logging)
    - [Sentry Integration](./docs/architecture/observability-strategy.md#sentry-integration)
    - [PostHog Analytics Integration](./docs/architecture/observability-strategy.md#posthog-analytics-integration)
    - [Client-Side Initialization](./docs/architecture/observability-strategy.md#client-side-initialization)
    - [Server Component Integration](./docs/architecture/observability-strategy.md#server-component-integration)
    - [Debugging Dashboard](./docs/architecture/observability-strategy.md#debugging-dashboard)
    - [Monitoring Best Practices](./docs/architecture/observability-strategy.md#monitoring-best-practices)
    - [Key Metrics to Track](./docs/architecture/observability-strategy.md#key-metrics-to-track)
  - [Environment Configuration](./docs/architecture/environment-configuration.md)
  - [Development Standards](./docs/architecture/development-standards.md)
    - [Overview](./docs/architecture/development-standards.md#overview)
    - [File Organization & Naming](./docs/architecture/development-standards.md#file-organization-naming)
    - [TypeScript Standards](./docs/architecture/development-standards.md#typescript-standards)
    - [Component Standards](./docs/architecture/development-standards.md#component-standards)
    - [Hook Standards](./docs/architecture/development-standards.md#hook-standards)
    - [Error Handling Standards](./docs/architecture/development-standards.md#error-handling-standards)
    - [API Integration Standards](./docs/architecture/development-standards.md#api-integration-standards)
    - [Performance Standards](./docs/architecture/development-standards.md#performance-standards)
    - [Testing Standards](./docs/architecture/development-standards.md#testing-standards)
    - [Code Review Checklist](./docs/architecture/development-standards.md#code-review-checklist)
      - [TypeScript](./docs/architecture/development-standards.md#typescript)
      - [Components](./docs/architecture/development-standards.md#components)
      - [Performance](./docs/architecture/development-standards.md#performance)
      - [Testing](./docs/architecture/development-standards.md#testing)
      - [Security](./docs/architecture/development-standards.md#security)
    - [Git Commit Standards](./docs/architecture/development-standards.md#git-commit-standards)
    - [Import Order Convention](./docs/architecture/development-standards.md#import-order-convention)
    - [Quick Reference](./docs/architecture/development-standards.md#quick-reference)

## Site Configuration System

This codebase uses a **site configuration system** to deploy multiple websites with different branding and layouts from a single codebase.

### Key Concepts:
- **Single codebase, multiple sites**: Deploy different branded websites by changing only the `SITE_CONFIG` environment variable
- **Build-time configuration**: All theme, branding, and layout decisions are made at build time for optimal performance
- **Type-safe configs**: Site configurations are TypeScript files in `src/config/sites/configs/`
- Try to implement code in a simple and clean way.

### What Goes in Site Config:
- **Brand**: name, logo, favicon, meta description
- **Theme**: base theme selection, color overrides, fonts
- **Layouts**: header/footer/widget variants
- **Navigation**: menu items and footer sections

### What Stays in Environment Variables:
- API endpoints, store IDs, integration keys
- Feature flags, debug settings
- Any runtime configuration


See [Site Configuration Guide](./docs/site-configuration.md) for full documentation.

## API Naming Convention

The codebase follows a dual-schema pattern for API integration:
- **API responses**: Use snake_case (e.g., `ecommerce_product_id`, `store_name`)
- **TypeScript/React**: Use camelCase internally (e.g., `ecommerceProductId`, `storeName`)
- **Transformation**: Convert between formats at API boundaries using transform functions

This pattern maintains type safety while following JavaScript conventions.
