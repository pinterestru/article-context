# Story 1.4: Basic Article Rendering

## Status
Draft

## Story
**As a** reader,
**I want** to see well-formatted article content,
**so that** I can read reviews comfortably on any device.

## Acceptance Criteria
1. Create Article component that renders HTML content safely
2. Implement responsive typography scale for readability
3. Style standard HTML elements (h1-h6, p, ul, ol, blockquote)
4. Ensure images within articles are responsive
5. Add reading-optimized max-width for text content
6. Implement smooth scrolling for anchor links
7. Verify mobile and desktop rendering
8. Test with sample article containing various HTML elements

## Tasks / Subtasks
- [ ] Create ArticleContent component (AC: 1)
  - [ ] Create src/components/article/ArticleContent.tsx
  - [ ] Use forwardRef pattern with proper TypeScript types
  - [ ] Extend HTMLAttributes<HTMLDivElement> for props
  - [ ] Accept content prop with HTML string
  - [ ] Add component display name
  - [ ] Export interface for props
- [ ] Implement safe HTML rendering (AC: 1)
  - [ ] Install DOMPurify for HTML sanitization: `pnpm add dompurify @types/dompurify`
  - [ ] Create sanitization utility in src/lib/utils/sanitize.ts
  - [ ] Configure DOMPurify with safe defaults
  - [ ] Sanitize content before rendering
  - [ ] Use dangerouslySetInnerHTML safely with sanitized content
  - [ ] Add CSP-compatible configuration
- [ ] Style typography for readability (AC: 2, 3, 5)
  - [ ] Create prose styles using Tailwind Typography plugin
  - [ ] Add max-width constraint (e.g., max-w-prose or ~65ch)
  - [ ] Configure font sizes for h1-h6 with proper hierarchy
  - [ ] Style paragraph spacing and line height
  - [ ] Style lists (ul, ol) with proper indentation
  - [ ] Style blockquotes with visual distinction
  - [ ] Ensure proper contrast ratios
- [ ] Handle responsive images (AC: 4)
  - [ ] Create image wrapper component for article images
  - [ ] Use Next.js Image component where possible
  - [ ] Add responsive sizing with aspect ratio preservation
  - [ ] Implement lazy loading for images
  - [ ] Add loading placeholders
  - [ ] Handle external image URLs safely
- [ ] Implement smooth scrolling (AC: 6)
  - [ ] Add CSS scroll-behavior: smooth to article container
  - [ ] Create anchor link handler for in-page navigation
  - [ ] Ensure proper offset for fixed headers
  - [ ] Test with various anchor link scenarios
- [ ] Add responsive design (AC: 7)
  - [ ] Set responsive padding for mobile/tablet/desktop
  - [ ] Adjust typography scale for different viewports
  - [ ] Test on various screen sizes
  - [ ] Ensure touch-friendly tap targets
  - [ ] Optimize reading width on large screens
- [ ] Update article page integration (AC: 1, 7)
  - [ ] Import ArticleContent in [slug]/page.tsx
  - [ ] Pass article content from API to component
  - [ ] Wrap in Container component from story 1.2
  - [ ] Add proper error handling
- [ ] Create sample article for testing (AC: 8)
  - [ ] Create mock article with all HTML elements
  - [ ] Include headings, paragraphs, lists, images
  - [ ] Add code blocks and blockquotes
  - [ ] Include anchor links for navigation
  - [ ] Test various content edge cases
- [ ] Write component tests (AC: 7, 8)
  - [ ] Test HTML sanitization
  - [ ] Test responsive behavior
  - [ ] Test anchor link navigation
  - [ ] Verify accessibility standards

## Dev Notes
### Previous Story Insights
- Story 1.1: Set up project with TypeScript and Tailwind CSS 4.1.11
- Story 1.2: Created Container component and layout structure
- Story 1.3: Implemented article API fetching with proper types

### Component Implementation
Based on [Source: architecture/component-standards.md#component-template]:
```typescript
'use client'

import { forwardRef, type HTMLAttributes } from 'react'
import { cn } from '@/lib/utils/cn'

export interface ArticleContentProps extends HTMLAttributes<HTMLDivElement> {
  content: string
}

// Use forwardRef pattern
// Set displayName for debugging
```

### Typography Standards
Based on [Source: architecture/styling-guidelines.md#styling-approach]:
- Font variables: --font-sans, --font-mono
- Container padding: --container-padding (1rem)
- Use Tailwind CSS utilities
- Consider Tailwind Typography plugin for prose styling

### Safe HTML Rendering
Based on [Source: architecture/development-standards.md#security]:
- XSS prevention: "No dangerouslySetInnerHTML with user content"
- Must sanitize HTML before rendering
- Use DOMPurify or similar library
- Configure safe defaults (no scripts, etc.)

### Image Handling
Based on [Source: architecture/development-standards.md#performance-standards]:
```typescript
<Image
  src={src}
  alt={alt}
  width={800}
  height={400}
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
  placeholder="blur" // if blur data available
/>
```

### File Locations
Based on [Source: architecture/source-tree.md]:
```
src/
├── components/
│   └── article/
│       ├── ArticleContent.tsx
│       └── ArticleContent.test.tsx
├── lib/
│   └── utils/
│       └── sanitize.ts
└── app/
    └── (marketing)/
        └── article/
            └── [slug]/
                └── page.tsx (update)
```

### Styling Approach
- Use utility-first Tailwind CSS
- Leverage prose classes for article content
- Ensure dark mode compatibility
- Mobile-first responsive design

### Testing
Based on [Source: architecture/testing-strategy.md]:
- Create component tests with renderWithProviders
- Test sanitization functionality
- Verify responsive behavior
- Check accessibility compliance

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-07 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record
### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_